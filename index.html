<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Server Status Checker</title>
  <style>
    body {
      /* Center content vertically and horizontally */
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      background: url('/wallpaper.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    #status {
      font-size: 1.5em;
      margin-bottom: 10px;
      background: rgba(255,255,255,0.8);
      padding: 10px 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.12);
    }
    #startBtn {
      display: none;
      padding: 10px 20px;
      font-size: 1em;
      border: none;
      border-radius: 5px;
      background: #4285f4;
      color: #fff;
      cursor: pointer;
      transition: background 0.2s;
    }
    #startBtn:hover {
      background: #3367d6;
    }
    h2 {
      background: rgba(255,255,255,0.8);
      padding: 10px 24px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }
  </style>
</head>
<body>
   <img src="wallpaper2.jpg" style="
         position:fixed;
         top:0;
         left:0;
         width:100vw;
         height:100dvh;
         object-fit:cover;
         z-index:-1;
         pointer-events:none;
       "/>
  <a href="EaglercraftX_1.8_u37_Offline_Signed.html" download style="display: block; background: #fff; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.08); max-width: 15vw; margin: 24px auto; text-align: center; padding: 10px 10px 10px 10px; color: #222; text-decoration: none; transition: box-shadow .2s; position: absolute; left: 5vh; top: 5vh;">
    <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 14px;">Click Here to Download Eaglercraft</div>
    <img src="download-icon.png" style="width: 5vw; rgba(0,0,0,0.10);" />
  </a>
  <a href="https://docs.google.com/document/d/1ei01fauHHMtGyTTp7Rd2xgGZKd986XKUa6yRL2gPU50/edit?usp=sharing" target="_blank"  style="display: block; background: #fff; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.08); max-width: 15vw; margin: 24px auto; text-align: center; padding: 10px 10px 10px 10px; color: #222; text-decoration: none; transition: box-shadow .2s; position: absolute; right: 5vh; top: 5vh;">
    <div style="font-size: 1.2rem; font-weight: 600; margin-bottom: 14px;">Click Here for Rules & Tutorial</div>
    <img src="document-icon.png" style="width: 5vw; rgba(0,0,0,0.10);" />
  </a>

  
  <div style="background: #14171a; color: #00ffe7; border: 1px solid #00ffe7; padding: 14px 24px; font-size: 1.1rem; font-family: 'Roboto Mono', 'Consolas', monospace; border-radius: 6px; text-align: center; letter-spacing: 2px; box-shadow: 0 2px 12px rgba(0,255,231,0.12); margin: 24px auto; max-width: 480px; position: absolute; top: 0">
     <span style="font-weight: bold;">Server IP:</span> ws://34.135.14.245:8081
  </div>
  <h2>Server Status</h2>
   
  <div style="display: flex; align-items: center; gap: 12px;">
    <div id="status">Checking...</div>
    <button id="refreshBtn" onclick="checkServerStatus()" style="background: rgba(255,255,255,0.8); border: none; cursor: pointer; padding: 8px; border-radius: 50%; transition: background 0.2s, transform 0.2s; box-shadow: 0 2px 6px rgba(0,0,0,0.12);">
      <img src="refresh-icon.png" alt="Refresh" style="width: 30px; height: 24px;" />
    </button>
  </div>
  <button id="startBtn">Start Server</button>
  <script>
    console.log("bitchass");
    const now = new Date();
    const target = new Date(now.getFullYear(), 11, 8, 8, 0, 0);
    const SERVER_URL = "http://34.135.14.245:8081/"; // Endpoint to check if VM is online
    const START_VM_URL = "https://start-server-615649177390.us-east1.run.app"; // Endpoint to start VM
    function checkServerStatus() {
      if(now < target){
        document.getElementById('status').textContent = "ðŸŸ¡ Server Opens Monday, December 8 at 8:00 AM";
        return;
      }
      fetch("https://check-online-615649177390.us-east1.run.app")
      .then((response) => {
        return response.json();
      })
      .then((response) => {
        console.log("response:")
        console.log(response.status);
        if(response.status == "RUNNING"){
          document.getElementById('status').textContent = "ðŸŸ¢ Server is ONLINE";
          document.getElementById('startBtn').style.display = 'none';
        }else{
          document.getElementById('status').textContent = "ðŸ”´ Server is OFFLINE";
          document.getElementById('startBtn').style.display = 'inline-block';
        }
        
        
      })
      .catch((error) => {
        document.getElementById('status').textContent = "An Error Occurred";
      });
    }

    
    document.getElementById('startBtn').addEventListener('click', function() {
      document.getElementById('status').textContent = "ðŸŸ¡ Starting VM... Please wait 15-30 seconds and refresh.";
      fetch(START_VM_URL, { method: 'POST' });
      document.getElementById('startBtn').style.display = 'none';
    });

    // Check status when page loads
    
    checkServerStatus();
    
    
    
  </script>
</body>
</html>
